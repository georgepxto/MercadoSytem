<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teste das Notifica√ß√µes - MercadoSystem</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .test-container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
      max-width: 500px;
      width: 100%;
      text-align: center;
    }

    .test-title {
      color: #2d3748;
      font-weight: 700;
      margin-bottom: 30px;
      font-size: 2rem;
    }

    .test-btn {
      margin: 10px;
      padding: 12px 25px;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s;
      border: none;
      font-size: 16px;
      min-width: 150px;
    }

    .test-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .back-link {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #e2e8f0;
    }

    .back-link a {
      color: #667eea;
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s;
    }

    .back-link a:hover {
      color: #764ba2;
    }

    /* Toast Container Styles */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
      max-width: 400px;
      width: 100%;
    }

    .modern-toast {
      background: white;
      border: none;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
      margin-bottom: 16px;
      overflow: hidden;
      border-left: 4px solid;
      backdrop-filter: blur(10px);
      transform: translateX(400px);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      opacity: 0;
    }

    .modern-toast.show {
      transform: translateX(0);
      opacity: 1;
    }

    .modern-toast.hide {
      transform: translateX(400px);
      opacity: 0;
    }

    .modern-toast.success {
      border-left-color: #22c55e;
    }

    .modern-toast.error {
      border-left-color: #ef4444;
    }

    .modern-toast.warning {
      border-left-color: #f59e0b;
    }

    .modern-toast.info {
      border-left-color: #0e7490;
    }

    .toast-header-modern {
      background: transparent;
      border: none;
      padding: 16px 20px 8px;
      display: flex;
      align-items: center;
      gap: 12px;
      position: relative;
    }

    .toast-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      color: white;
      font-weight: bold;
    }

    .toast-icon.success {
      background: #22c55e;
    }

    .toast-icon.error {
      background: #ef4444;
    }

    .toast-icon.warning {
      background: #f59e0b;
    }

    .toast-icon.info {
      background: #0e7490;
    }

    .toast-title {
      font-weight: 600;
      color: #1f2937;
      margin: 0;
      font-size: 16px;
      flex: 1;
    }

    .toast-body-modern {
      padding: 0 20px 16px;
      color: #6b7280;
      font-size: 14px;
      line-height: 1.5;
    }

    .toast-close {
      background: none;
      border: none;
      color: #9ca3af;
      cursor: pointer;
      padding: 6px;
      border-radius: 6px;
      transition: all 0.2s;
      font-size: 18px;
      line-height: 1;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: auto;
    }

    .toast-close:hover {
      background: #f3f4f6;
      color: #374151;
      transform: scale(1.1);
    }

    .toast-close:active {
      transform: scale(0.95);
    }

    @media (max-width: 480px) {
      .toast-container {
        left: 50%;
        right: auto;
        top: 20px;
        max-width: 90vw;
        width: 90vw;
        transform: translateX(-50%);
        z-index: 1055;
      }

      .modern-toast {
        margin: 0 auto 10px auto;
        width: 100%;
        transform: translateY(-20px);
        opacity: 0;
      }

      .modern-toast.show {
        transform: translateY(0);
        opacity: 1;
      }

      .modern-toast.hide {
        transform: translateY(-20px);
        opacity: 0;
      }
    }
  </style>
</head>

<body>
  <!-- Container para Notifica√ß√µes Modernas -->
  <div class="toast-container" id="toastContainer"></div>

  <div class="test-container">
    <h1 class="test-title">üß™ Teste de Notifica√ß√µes</h1>

    <p class="text-muted mb-4">Clique nos bot√µes abaixo para testar o sistema de notifica√ß√µes modernas. Verifique se o bot√£o X funciona corretamente!</p>

    <div class="d-grid gap-3">
      <button onclick="testSuccess()" class="btn btn-success test-btn">
        <i class="bi bi-check-circle me-2"></i>
        Testar Sucesso
      </button>

      <button onclick="testError()" class="btn btn-danger test-btn">
        <i class="bi bi-x-circle me-2"></i>
        Testar Erro
      </button>

      <button onclick="testWarning()" class="btn btn-warning test-btn">
        <i class="bi bi-exclamation-triangle me-2"></i>
        Testar Aviso
      </button>

      <button onclick="testInfo()" class="btn btn-info test-btn">
        <i class="bi bi-info-circle me-2"></i>
        Testar Info
      </button>

      <button onclick="testConfirm()" class="btn btn-outline-primary test-btn">
        <i class="bi bi-question-circle me-2"></i>
        Testar Confirma√ß√£o
      </button>

      <button onclick="testMultiple()" class="btn btn-outline-secondary test-btn">
        <i class="bi bi-stack me-2"></i>
        Testar M√∫ltiplas
      </button>
    </div>

    <div class="back-link">
      <a href="http://127.0.0.1:8000">
        <i class="bi bi-arrow-left me-2"></i>
        Voltar ao Sistema
      </a>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Sistema de Notifica√ß√µes Modernas (c√≥pia do sistema principal)
    class ModernToast {
      constructor() {
        this.container = document.getElementById('toastContainer');
        this.toasts = [];
      }

      show(message, type = 'info', title = null, duration = 5000) {
        const toastId = 'toast_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);

        // Definir √≠cones e t√≠tulos padr√£o
        const config = {
          success: {
            icon: '‚úì',
            defaultTitle: 'Sucesso!'
          },
          error: {
            icon: '‚úï',
            defaultTitle: 'Erro!'
          },
          warning: {
            icon: '‚ö†',
            defaultTitle: 'Aten√ß√£o!'
          },
          info: {
            icon: '‚ìò',
            defaultTitle: 'Informa√ß√£o'
          }
        };

        const toastConfig = config[type] || config.info;
        const toastTitle = title || toastConfig.defaultTitle;

        // Criar HTML da notifica√ß√£o
        const toastHtml = `
                    <div class="modern-toast ${type}" id="${toastId}">
                        <div class="toast-header-modern">
                            <div class="toast-icon ${type}">${toastConfig.icon}</div>
                            <h6 class="toast-title">${toastTitle}</h6>
                            <button class="toast-close" data-toast-id="${toastId}" aria-label="Fechar notifica√ß√£o">
                                <i class="bi bi-x" style="font-size: 20px;"></i>
                                <span style="display: none;">√ó</span>
                            </button>
                        </div>
                        <div class="toast-body-modern">${message}</div>
                    </div>
                `;

        // Adicionar ao container
        this.container.insertAdjacentHTML('beforeend', toastHtml);
        const toastElement = document.getElementById(toastId);

        // Verificar se o √≠cone Bootstrap carregou, sen√£o usar texto
        const closeButton = toastElement.querySelector('.toast-close');
        const icon = closeButton.querySelector('i');
        const fallbackText = closeButton.querySelector('span');

        // Fallback se Bootstrap Icons n√£o carregou
        setTimeout(() => {
          if (window.getComputedStyle(icon).fontFamily.indexOf('bootstrap-icons') === -1) {
            icon.style.display = 'none';
            fallbackText.style.display = 'inline';
            fallbackText.style.fontSize = '20px';
            fallbackText.style.fontWeight = 'bold';
          }
        }, 100);

        // Adicionar evento de clique para o bot√£o de fechar
        closeButton.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          this.hide(toastId);
        });

        // Adicionar √† lista de toasts ativos
        this.toasts.push({
          id: toastId,
          element: toastElement,
          timeout: null
        });

        // Animar entrada
        setTimeout(() => {
          toastElement.classList.add('show');
        }, 100);

        // Auto-remover se duration > 0
        if (duration > 0) {
          const toastData = this.toasts.find(t => t.id === toastId);
          toastData.timeout = setTimeout(() => {
            this.hide(toastId);
          }, duration);
        }

        return toastId;
      }

      hide(toastId) {
        const toastIndex = this.toasts.findIndex(t => t.id === toastId);
        if (toastIndex === -1) return;

        const toastData = this.toasts[toastIndex];
        const toastElement = toastData.element;

        // Limpar timeout se existir
        if (toastData.timeout) {
          clearTimeout(toastData.timeout);
        }

        // Animar sa√≠da
        toastElement.classList.add('hide');
        toastElement.classList.remove('show');

        // Remover do DOM ap√≥s anima√ß√£o
        setTimeout(() => {
          if (toastElement && toastElement.parentNode) {
            toastElement.parentNode.removeChild(toastElement);
          }
        }, 400);

        // Remover da lista
        this.toasts.splice(toastIndex, 1);
      }

      hideAll() {
        this.toasts.forEach(toast => {
          this.hide(toast.id);
        });
      }

      // M√©todos de conveni√™ncia
      success(message, title = null, duration = 5000) {
        return this.show(message, 'success', title, duration);
      }

      error(message, title = null, duration = 7000) {
        return this.show(message, 'error', title, duration);
      }

      warning(message, title = null, duration = 6000) {
        return this.show(message, 'warning', title, duration);
      }

      info(message, title = null, duration = 5000) {
        return this.show(message, 'info', title, duration);
      }

      confirm(message, title = 'Confirma√ß√£o', onConfirm = null, onCancel = null) {
        return new Promise((resolve, reject) => {
          const modalId = 'confirmModal_' + Date.now();
          const modal = document.createElement('div');
          modal.id = modalId;
          modal.className = 'modal fade';
          modal.setAttribute('tabindex', '-1');
          modal.setAttribute('aria-hidden', 'true');

          modal.innerHTML = `
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">${title}</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                                </div>
                                <div class="modal-body">
                                    <p class="mb-0">${message}</p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                    <button type="button" class="btn btn-danger" id="confirmBtn_${modalId}">Confirmar</button>
                                </div>
                            </div>
                        </div>
                    `;

          document.body.appendChild(modal);

          const bootstrapModal = new bootstrap.Modal(modal);
          const confirmBtn = document.getElementById(`confirmBtn_${modalId}`);

          confirmBtn.addEventListener('click', () => {
            bootstrapModal.hide();
            if (onConfirm) onConfirm();
            resolve(true);
          });

          modal.addEventListener('hidden.bs.modal', () => {
            if (!modal.dataset.confirmed) {
              if (onCancel) onCancel();
              resolve(false);
            }
            document.body.removeChild(modal);
          });

          confirmBtn.addEventListener('click', () => {
            modal.dataset.confirmed = 'true';
          });

          bootstrapModal.show();
        });
      }
    }

    // Inicializar sistema de notifica√ß√µes
    window.modernToast = new ModernToast();

    // Fun√ß√µes de teste
    function testSuccess() {
      modernToast.success('Opera√ß√£o realizada com sucesso! Este √© um exemplo de notifica√ß√£o de sucesso.', 'Perfeito!');
    }

    function testError() {
      modernToast.error('Algo deu errado! Este √© um exemplo de notifica√ß√£o de erro.', 'Ops!');
    }

    function testWarning() {
      modernToast.warning('Aten√ß√£o! Esta √© uma mensagem de aviso importante.', 'Cuidado!');
    }

    function testInfo() {
      modernToast.info('Informa√ß√£o √∫til! Esta √© uma notifica√ß√£o informativa.', 'Sabia que...');
    }

    function testConfirm() {
      modernToast.confirm(
        'Voc√™ tem certeza que deseja continuar com esta a√ß√£o?',
        'Confirmar A√ß√£o',
        () => {
          modernToast.success('A√ß√£o confirmada com sucesso!');
        },
        () => {
          modernToast.info('A√ß√£o cancelada pelo usu√°rio.');
        }
      );
    }

    function testMultiple() {
      modernToast.success('Primeira notifica√ß√£o!');
      setTimeout(() => modernToast.warning('Segunda notifica√ß√£o!'), 500);
      setTimeout(() => modernToast.error('Terceira notifica√ß√£o!'), 1000);
      setTimeout(() => modernToast.info('Quarta notifica√ß√£o!'), 1500);
    }
  </script>
</body>

</html>